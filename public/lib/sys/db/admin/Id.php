<?php
/**
 * Generated by Haxe 4.0.0-rc.1+1fdd3d5
 */

namespace sys\db\admin;

use \php\Boot;
use \php\_Boot\HxString;
use \php\_Boot\HxException;

class Id {
	/**
	 * @param int $id
	 * 
	 * @return string
	 */
	static public function decode ($id) {
		#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:49: characters 3-27
		$s = new \StringBuf();
		#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:50: lines 50-53
		if ($id < 1) {
			#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:51: characters 4-27
			if ($id === 0) {
				#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:51: characters 18-27
				return "";
			}
			#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:52: characters 4-9
			throw new HxException("Invalid ID " . ($id??'null'));
		}
		#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:54: lines 54-61
		while ($id > 0) {
			#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:55: characters 4-20
			$k = $id & 31;
			#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:56: lines 56-59
			if ($k < 27) {
				#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:57: characters 5-6
				$s1 = $s;
				#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:57: characters 5-22
				$s1->b = ($s1->b??'null') . (mb_chr($k + 96)??'null');
			} else {
				#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:59: characters 5-6
				$s2 = $s;
				#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:59: characters 5-22
				$s2->b = ($s2->b??'null') . (mb_chr($k + 22)??'null');
			}
			#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:60: characters 4-12
			$id >>= 5;
		}
		#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:62: characters 3-22
		return $s->b;
	}

	/**
	 * @param string $id
	 * 
	 * @return int
	 */
	static public function encode ($id) {
		#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:28: characters 3-21
		$l = mb_strlen($id);
		#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:29: lines 29-30
		if ($l > 6) {
			#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:30: characters 4-9
			throw new HxException("Invalid identifier '" . ($id??'null') . "'");
		}
		#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:31: characters 3-13
		$k = 0;
		#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:32: characters 3-13
		$p = $l;
		#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:33: lines 33-44
		while ($p > 0) {
			#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:34: characters 4-36
			$c = HxString::charCodeAt($id, --$p) - 96;
			#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:35: lines 35-41
			if (($c < 1) || ($c > 26)) {
				#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:36: characters 5-20
				$c = $c + 96 - 48;
				#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:37: lines 37-40
				if (($c >= 1) && ($c <= 5)) {
					#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:38: characters 6-13
					$c += 26;
				} else {
					#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:40: characters 6-11
					throw new HxException("Invalid character " . (HxString::charCodeAt($id, $p)??'null') . " in " . ($id??'null'));
				}
			}
			#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:42: characters 4-11
			$k <<= 5;
			#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:43: characters 4-10
			$k += $c;
		}
		#/home/bubar/projects/spod/src/sys/db/admin/Id.hx:45: characters 3-11
		return $k;
	}
}

Boot::registerClass(Id::class, 'sys.db.admin.Id');
