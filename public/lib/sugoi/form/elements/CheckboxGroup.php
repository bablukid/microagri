<?php
/**
 * Generated by Haxe 4.0.0-rc.1+1fdd3d5
 */

namespace sugoi\form\elements;

use \php\Boot;
use \php\Web;
use \sugoi\form\FormElement;
use \sugoi\form\Formatter;

/**
 * Manage an array of string with a checkbox group
 */
class CheckboxGroup extends FormElement {
	/**
	 * @var int
	 */
	public $columns;
	/**
	 * @var \Array_hx
	 */
	public $data;
	/**
	 * @var Formatter
	 */
	public $formatter;
	/**
	 * @var bool
	 */
	public $labelLeft;
	/**
	 * @var bool
	 */
	public $labelRight;
	/**
	 * @var string
	 */
	public $selectMessage;
	/**
	 * @var bool
	 */
	public $verticle;

	/**
	 * @param string $name
	 * @param string $label
	 * @param \Array_hx $data
	 * @param \Array_hx $selected
	 * @param bool $verticle
	 * @param bool $labelRight
	 * 
	 * @return void
	 */
	public function __construct ($name, $label, $data, $selected = null, $verticle = true, $labelRight = true) {
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:21: lines 21-31
		if ($verticle === null) {
			$verticle = true;
		}
		if ($labelRight === null) {
			$labelRight = true;
		}
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:22: characters 3-10
		parent::__construct();
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:23: characters 3-19
		$this->name = $name;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:24: characters 3-21
		$this->label = $label;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:25: characters 3-19
		$this->data = $data;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:26: characters 3-57
		$this->value = ($selected !== null ? $selected : new \Array_hx());
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:27: characters 3-27
		$this->verticle = $verticle;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:28: characters 3-31
		$this->labelRight = $labelRight;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:30: characters 3-14
		$this->columns = 1;
	}

	/**
	 * @return void
	 */
	public function populate () {
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:36: characters 3-60
		$v = Web::getParamValues(($this->parentForm->name??'null') . "_" . ($this->name??'null'));
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:38: lines 38-43
		if ($this->parentForm->isSubmitted()) {
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:40: characters 4-32
			$this->value = ($v !== null ? $v : new \Array_hx());
		} else if ($v !== null) {
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:42: characters 19-28
			$this->value = $v;
		}
	}

	/**
	 * @return string
	 */
	public function render () {
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:48: characters 3-14
		$s = "";
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:49: characters 3-39
		$n = ($this->parentForm->name??'null') . "_" . ($this->name??'null');
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:51: characters 3-29
		$tagCss = $this->getClasses();
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:52: characters 3-36
		$labelCss = $this->getLabelClasses();
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:54: characters 3-13
		$c = 0;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:55: characters 3-34
		$datas = \Lambda::array($this->data);
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:56: lines 56-99
		if ($datas !== null) {
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:58: characters 4-58
			$rowsPerColumn = (int)(ceil($datas->length / $this->columns));
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:59: characters 4-21
			$s = "<table><tr>";
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:60: lines 60-97
			$_g = 0;
			$_g1 = $this->columns;
			while ($_g < $_g1) {
				$i = $_g++;
				#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:62: characters 5-33
				$s = ($s??'null') . "<td valign=\"top\">\x0A";
				#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:63: characters 5-21
				$s = ($s??'null') . "<table>\x0A";
				#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:65: lines 65-94
				$_g2 = 0;
				$_g11 = $rowsPerColumn;
				while ($_g2 < $_g11) {
					$j = $_g2++;
					#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:67: characters 6-34
					if ($c >= $datas->length) {
						#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:67: characters 29-34
						break;
					}
					#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:69: characters 6-17
					$s = ($s??'null') . "<tr>";
					#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:71: characters 6-33
					$row = ($datas->arr[$c] ?? null);
					#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:73: characters 6-217
					$checkbox = "<input type=\"checkbox\" class=\"" . ($tagCss??'null') . "\" name=\"" . ($n??'null') . "[]\" id=\"" . ($n??'null') . ($c??'null') . "\" value=\"" . (\Std::string(Boot::dynamicField($row, 'value'))??'null') . "\" " . ((($this->value !== null ? (\Lambda::has($this->value, Boot::dynamicField($row, 'value')) ? "checked" : "") : ""))??'null') . " ></input>\x0A";
					#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:74: characters 6-16
					$label = null;
					#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:76: lines 76-82
					if ($this->formatter !== null) {
						#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:77: characters 7-121
						$label = "<label for=\"" . ($n??'null') . ($c??'null') . "\" class=\"" . "" . "\" >" . ($this->formatter->format(Boot::dynamicField($row, 'label'))??'null') . "</label>\x0A";
					} else {
						#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:81: characters 7-104
						$label = "<label for=\"" . ($n??'null') . ($c??'null') . "\" class=\"" . "" . "\" >" . (\Std::string(Boot::dynamicField($row, 'label'))??'null') . "</label>\x0A";
					}
					#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:84: lines 84-91
					if ($this->labelRight) {
						#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:86: characters 7-41
						$s = ($s??'null') . "<td>" . ($checkbox??'null') . "</td>\x0A";
						#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:87: characters 7-44
						$s = ($s??'null') . "<td>&nbsp;" . ($label??'null') . "</td>\x0A";
					} else {
						#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:89: characters 7-44
						$s = ($s??'null') . "<td>" . ($label??'null') . "&nbsp;</td>\x0A";
						#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:90: characters 7-41
						$s = ($s??'null') . "<td>" . ($checkbox??'null') . "</td>\x0A";
					}
					#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:92: characters 6-18
					$s = ($s??'null') . "</tr>";
					#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:93: characters 6-9
					++$c;
				}

				#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:95: characters 5-20
				$s = ($s??'null') . "</table>";
				#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:96: characters 5-17
				$s = ($s??'null') . "</td>";
			}

			#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:98: characters 4-26
			$s = ($s??'null') . "</tr></table>\x0A";
		}
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/CheckboxGroup.hx:101: characters 3-11
		return $s;
	}
}

Boot::registerClass(CheckboxGroup::class, 'sugoi.form.elements.CheckboxGroup');
