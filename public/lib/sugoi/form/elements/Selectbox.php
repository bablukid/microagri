<?php
/**
 * Generated by Haxe 4.0.0-rc.1+1fdd3d5
 */

namespace sugoi\form\elements;

use \php\Boot;
use \sugoi\form\FormElement;
use \sugoi\form\Form;

class Selectbox extends FormElement {
	/**
	 * @var \Array_hx
	 */
	public $data;
	/**
	 * @var bool
	 */
	public $multiple;
	/**
	 * @var string
	 */
	public $nullMessage;
	/**
	 * @var string
	 */
	public $onChange;
	/**
	 * @var int
	 */
	public $size;

	/**
	 * @param string $name
	 * @param string $label
	 * @param \Array_hx $data
	 * @param mixed $selected
	 * @param bool $required
	 * @param string $nullMessage
	 * @param string $attributes
	 * 
	 * @return void
	 */
	public function __construct ($name, $label, $data = null, $selected = null, $required = false, $nullMessage = "-", $attributes = "") {
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:14: lines 14-27
		if ($required === null) {
			$required = false;
		}
		if ($nullMessage === null) {
			$nullMessage = "-";
		}
		if ($attributes === null) {
			$attributes = "";
		}
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:15: characters 3-10
		parent::__construct();
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:16: characters 3-19
		$this->name = $name;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:17: characters 3-21
		$this->label = $label;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:18: characters 3-47
		$this->data = ($data !== null ? $data : new \Array_hx());
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:19: characters 3-24
		$this->value = $selected;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:20: characters 3-27
		$this->required = $required;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:21: characters 3-33
		$this->nullMessage = $nullMessage;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:22: characters 3-31
		$this->attributes = $attributes;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:23: characters 3-11
		$this->size = 1;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:24: characters 3-19
		$this->multiple = false;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:25: characters 3-16
		$this->onChange = "";
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:26: characters 3-59
		if (Form::$USE_TWITTER_BOOTSTRAP) {
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:26: characters 34-59
			$this->cssClass = "form-control";
		}
	}

	/**
	 * @return string
	 */
	public function render () {
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:31: characters 3-14
		$s = "";
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:32: characters 3-27
		$n = $this->parentForm->name;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:33: characters 3-17
		$n = ($n??'null') . "_" . ($this->name??'null');
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:35: characters 3-168
		$s = ($s??'null') . "\x0A<select name=\"" . ($n??'null') . "\" id=\"" . ($n??'null') . "\" " . ($this->attributes??'null') . " class=\"" . ($this->getClasses()??'null') . "\" onChange=\"" . ($this->onChange??'null') . "\" size=\"" . ($this->size??'null') . "\" " . ((($this->multiple ? "multiple" : ""))??'null') . "/>";
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:37: lines 37-38
		if ($this->nullMessage !== "") {
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:38: characters 4-108
			$s = ($s??'null') . "<option value=\"\" " . (((\Std::string($this->value) === "" ? "selected" : ""))??'null') . ">" . ($this->nullMessage??'null') . "</option>";
		}
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:40: lines 40-44
		if ($this->data !== null) {
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:41: lines 41-43
			$_g = 0;
			$_g1 = $this->data;
			while ($_g < $_g1->length) {
				#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:41: characters 9-12
				$row = ($_g1->arr[$_g] ?? null);
				#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:41: lines 41-43
				++$_g;
				#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:42: characters 5-167
				$s = ($s??'null') . "<option value=\"" . (\Std::string($row->value)??'null') . "\" " . (((\Std::string($row->value) === \Std::string($this->value) ? "selected" : ""))??'null') . ">" . (\Std::string($row->label)??'null') . "</option>";
			}
		}
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:45: characters 3-19
		$s = ($s??'null') . "</select>";
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Selectbox.hx:47: characters 3-11
		return $s;
	}
}

Boot::registerClass(Selectbox::class, 'sugoi.form.elements.Selectbox');
