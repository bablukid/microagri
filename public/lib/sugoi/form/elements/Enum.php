<?php
/**
 * Generated by Haxe 4.0.0-rc.1+1fdd3d5
 */

namespace sugoi\form\elements;

use \php\Boot;
use \sugoi\form\FormElement;
use \sugoi\form\Form;

class Enum extends FormElement {
	/**
	 * @var \Array_hx
	 */
	public $checked;
	/**
	 * @var int
	 */
	public $columns;
	/**
	 * @var string
	 */
	public $enumName;
	/**
	 * @var bool
	 */
	public $labelLeft;
	/**
	 * @var bool
	 */
	public $labelRight;
	/**
	 * @var string
	 */
	public $selectMessage;
	/**
	 * @var bool
	 */
	public $verticle;

	/**
	 *
	 * @param	name
	 * @param	label
	 * @param	data			list of enums
	 * @param	value			int (enum index)
	 * @param	?verticle
	 * @param	?labelRight
	 * 
	 * @param string $name
	 * @param string $label
	 * @param string $enumName
	 * @param int $value
	 * @param bool $required
	 * @param bool $verticle
	 * @param bool $labelRight
	 * 
	 * @return void
	 */
	public function __construct ($name, $label, $enumName, $value, $required = false, $verticle = false, $labelRight = true) {
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:29: lines 29-47
		if ($required === null) {
			$required = false;
		}
		if ($verticle === null) {
			$verticle = false;
		}
		if ($labelRight === null) {
			$labelRight = true;
		}
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:30: characters 3-10
		parent::__construct();
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:31: characters 3-19
		$this->name = $name;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:32: characters 3-21
		$this->label = $label;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:33: characters 3-27
		$this->enumName = $enumName;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:35: characters 3-27
		$this->verticle = $verticle;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:36: characters 3-31
		$this->labelRight = $labelRight;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:40: lines 40-44
		if ($required && ($value === null)) {
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:41: characters 4-65
			$this->value = 0;
		} else {
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:43: characters 4-22
			$this->value = $value;
		}
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:46: characters 3-14
		$this->columns = 1;
	}

	/**
	 * @param string $str
	 * 
	 * @return int
	 */
	public function getTypedValue ($str) {
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:50: characters 3-31
		if ($str === null) {
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:50: characters 20-31
			return null;
		}
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:52: characters 3-30
		$str = trim($str);
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:53: lines 53-57
		if ($str === "") {
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:54: characters 4-15
			return null;
		} else {
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:56: characters 4-28
			return \Std::parseInt($str);
		}
	}

	/**
	 * @return int
	 */
	public function getValue () {
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:61: characters 3-33
		if ($this->value === null) {
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:61: characters 22-33
			return null;
		}
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:62: characters 10-57
		return \Type::createEnumIndex(\Type::resolveEnum($this->enumName), $this->value, null);
	}

	/**
	 * @return string
	 */
	public function render () {
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:67: characters 3-14
		$s = "";
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:68: characters 3-39
		$n = ($this->parentForm->name??'null') . "_" . ($this->name??'null');
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:70: characters 3-29
		$tagCss = $this->getClasses();
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:75: characters 3-13
		$c = 0;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:77: characters 3-57
		$array = \Type::allEnums(\Type::resolveEnum($this->enumName));
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:79: characters 3-57
		$rowsPerColumn = (int)(ceil($array->length / $this->columns));
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:80: characters 3-47
		$s = "<table style='margin-bottom:8px;'><tr>";
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:81: lines 81-119
		$_g = 0;
		$_g1 = $this->columns;
		while ($_g < $_g1) {
			$i = $_g++;
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:83: characters 4-32
			$s = ($s??'null') . "<td valign=\"top\">\x0A";
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:84: characters 4-20
			$s = ($s??'null') . "<table>\x0A";
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:86: lines 86-116
			$_g2 = 0;
			$_g11 = $rowsPerColumn;
			while ($_g2 < $_g11) {
				$j = $_g2++;
				#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:88: characters 5-33
				if ($c >= $array->length) {
					#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:88: characters 28-33
					break;
				}
				#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:90: characters 5-16
				$s = ($s??'null') . "<tr>";
				#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:92: characters 5-32
				$row = ($array->arr[$c] ?? null);
				#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:93: characters 5-48
				$checked = $this->value === Boot::dynamicField($row, 'index');
				#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:94: characters 5-178
				$checkbox = "<input type=\"radio\" class=\"" . ($tagCss??'null') . "\" name=\"" . ($n??'null') . "\" id=\"" . ($n??'null') . (\Std::string($row)??'null') . "\" value=\"" . (Boot::dynamicField($row, 'index')??'null') . "\" " . ((($checked ? "checked" : ""))??'null') . " ></input>\x0A";
				#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:95: characters 5-15
				$label = null;
				#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:97: characters 5-29
				$t = Form::$translator;
				#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:98: lines 98-102
				if ($t === null) {
					#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:99: characters 6-79
					$label = "<label for=\"" . ($n??'null') . ($c??'null') . "\" >" . (\Std::string($row)??'null') . "</label>\x0A";
				} else {
					#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:101: characters 6-84
					$label = "<label for=\"" . ($n??'null') . ($c??'null') . "\" >" . ($t->_(\Std::string($row))??'null') . "</label>\x0A";
				}
				#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:105: lines 105-112
				if ($this->labelRight) {
					#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:107: characters 6-91
					$s = ($s??'null') . "<td style='vertical-align:middle;padding-right: 8px;'>" . ($checkbox??'null') . "</td> \x0A";
					#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:108: characters 6-68
					$s = ($s??'null') . "<td style='vertical-align:middle;'>" . ($label??'null') . "</td>\x0A";
				} else {
					#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:110: characters 6-88
					$s = ($s??'null') . "<td style='vertical-align:middle;padding-right: 8px;'>" . ($label??'null') . "</td> \x0A";
					#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:111: characters 6-71
					$s = ($s??'null') . "<td style='vertical-align:middle;'>" . ($checkbox??'null') . "</td>\x0A";
				}
				#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:114: characters 5-17
				$s = ($s??'null') . "</tr>";
				#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:115: characters 5-8
				++$c;
			}

			#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:117: characters 4-19
			$s = ($s??'null') . "</table>";
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:118: characters 4-16
			$s = ($s??'null') . "</td>";
		}

		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:120: characters 3-25
		$s = ($s??'null') . "</tr></table>\x0A";
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/Enum.hx:124: characters 3-11
		return $s;
	}
}

Boot::registerClass(Enum::class, 'sugoi.form.elements.Enum');
