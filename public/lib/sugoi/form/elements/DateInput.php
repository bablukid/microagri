<?php
/**
 * Generated by Haxe 4.0.0-rc.1+1fdd3d5
 */

namespace sugoi\form\elements;

use \php\Boot;
use \sugoi\form\ListData;
use \sugoi\form\Form;

/**
 * date selectBox : day month year hour minutes
 */
class DateInput extends DateDropdowns {
	/**
	 * @var Selectbox
	 */
	public $hourSelector;
	/**
	 * @var Selectbox
	 */
	public $minuteSelector;

	/**
	 * @param string $name
	 * @param string $label
	 * @param \Date $value
	 * @param bool $required
	 * @param int $yearMin
	 * @param int $yearMax
	 * @param \Array_hx $validators
	 * @param string $attibutes
	 * 
	 * @return void
	 */
	public function __construct ($name, $label, $value = null, $required = false, $yearMin = 1950, $yearMax = null, $validators = null, $attibutes = "") {
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:15: lines 15-26
		if ($required === null) {
			$required = false;
		}
		if ($yearMin === null) {
			$yearMin = 1950;
		}
		if ($attibutes === null) {
			$attibutes = "";
		}
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:16: characters 3-79
		parent::__construct($name, $label, $value, $required, $yearMin, $yearMax, $validators, $attibutes);
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:17: characters 3-38
		$t = Form::$translator;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:18: characters 54-65
		$tmp = $t->_("hour");
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:18: characters 69-98
		$tmp1 = ListData::getDateElement(0, 23);
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:18: characters 3-141
		$this->hourSelector = new Selectbox(($name??'null') . "_hour", $tmp, $tmp1, $value->getHours(), true, "-", "title=\"Hour\"");
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:19: characters 56-69
		$tmp2 = $t->_("minute");
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:19: characters 71-101
		$tmp3 = ListData::getDateElement(0, 59);
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:19: characters 3-151
		$this->minuteSelector = new Selectbox(($name??'null') . "_minute", $tmp2, $tmp3, $value->getMinutes(), true, "-", "title=\"Minute\"");
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:21: lines 21-24
		if (Form::$USE_TWITTER_BOOTSTRAP) {
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:22: characters 4-42
			$this->hourSelector->cssClass = "form-control";
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:23: characters 4-44
			$this->minuteSelector->cssClass = "form-control";
		}
	}

	/**
	 * @return bool
	 */
	public function isValid () {
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:29: characters 3-14
		return true;
	}

	/**
	 * @return void
	 */
	public function populate () {
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:53: characters 3-53
		$n = ($this->parentForm->name??'null') . "_" . ($this->hourSelector->name??'null');
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:54: characters 3-37
		$v = (\App::$current->params->data[$n] ?? null);
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:55: characters 3-35
		$params = \App::$current->params;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:57: lines 57-67
		if ($v !== null) {
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:59: characters 4-88
			$minute = \Std::parseInt(($params->data[($this->parentForm->name??'null') . "_" . ($this->minuteSelector->name??'null')] ?? null));
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:60: characters 4-85
			$hour = \Std::parseInt(($params->data[($this->parentForm->name??'null') . "_" . ($this->hourSelector->name??'null')] ?? null));
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:61: characters 4-83
			$day = \Std::parseInt(($params->data[($this->parentForm->name??'null') . "_" . ($this->daySelector->name??'null')] ?? null));
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:62: characters 4-86
			$month = \Std::parseInt(($params->data[($this->parentForm->name??'null') . "_" . ($this->monthSelector->name??'null')] ?? null));
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:63: characters 4-85
			$year = \Std::parseInt(($params->data[($this->parentForm->name??'null') . "_" . ($this->yearSelector->name??'null')] ?? null));
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:65: characters 4-59
			$this->value = new \Date($year, $month - 1, $day, $hour, $minute, 0);
		}
	}

	/**
	 * @return string
	 */
	public function render () {
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:35: characters 3-44
		$this->hourSelector->parentForm = $this->parentForm;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:36: characters 3-46
		$this->minuteSelector->parentForm = $this->parentForm;
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:38: characters 3-34
		$s = (parent::render()??'null') . " : ";
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:40: lines 40-44
		if ($this->value !== null) {
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:41: characters 4-28
			$v = $this->value;
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:42: characters 4-37
			$this->hourSelector->value = $v->getHours();
			#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:43: characters 4-41
			$this->minuteSelector->value = $v->getMinutes();
		}
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:45: characters 3-37
		$s = ($s??'null') . ($this->hourSelector->render()??'null') . " h ";
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:46: characters 3-39
		$s = ($s??'null') . ($this->minuteSelector->render()??'null') . " m ";
		#/home/bubar/projects/sugoi/src/sugoi/form/elements/DateInput.hx:47: characters 3-11
		return $s;
	}
}

Boot::registerClass(DateInput::class, 'sugoi.form.elements.DateInput');
