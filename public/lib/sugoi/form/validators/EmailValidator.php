<?php
/**
 * Generated by Haxe 4.0.0-rc.1+1fdd3d5
 */

namespace sugoi\form\validators;

use \php\Boot;

class EmailValidator extends Validator {
	/**
	 * @var \EReg
	 */
	static public $emailRegex;

	/**
	 * @var string
	 */
	public $errorNotValid;

	/**
	 * @param string $value
	 * 
	 * @return bool
	 */
	static public function check ($value) {
		#/home/bubar/projects/sugoi/src/sugoi/form/validators/EmailValidator.hx:35: characters 3-34
		$val = new EmailValidator();
		#/home/bubar/projects/sugoi/src/sugoi/form/validators/EmailValidator.hx:36: characters 3-28
		return $val->isValid($value);
	}

	/**
	 * @return void
	 */
	public function __construct () {
		#/home/bubar/projects/sugoi/src/sugoi/form/validators/EmailValidator.hx:11: characters 3-10
		parent::__construct();
		#/home/bubar/projects/sugoi/src/sugoi/form/validators/EmailValidator.hx:15: lines 15-18
		$this->errorNotValid = (\App::$current->getLang() === "fr" ? "Adresse email invalide" : "Not a valid email address");
	}

	/**
	 * @param mixed $value
	 * 
	 * @return bool
	 */
	public function isValid ($value) {
		#/home/bubar/projects/sugoi/src/sugoi/form/validators/EmailValidator.hx:24: characters 3-23
		parent::isValid($value);
		#/home/bubar/projects/sugoi/src/sugoi/form/validators/EmailValidator.hx:26: characters 3-51
		$valid = EmailValidator::$emailRegex->match(\Std::string($value));
		#/home/bubar/projects/sugoi/src/sugoi/form/validators/EmailValidator.hx:27: lines 27-28
		if (!$valid) {
			#/home/bubar/projects/sugoi/src/sugoi/form/validators/EmailValidator.hx:28: characters 4-29
			$this->errors->add($this->errorNotValid);
		}
		#/home/bubar/projects/sugoi/src/sugoi/form/validators/EmailValidator.hx:30: characters 3-15
		return $valid;
	}

	/**
	 * @internal
	 * @access private
	 */
	static public function __hx__init ()
	{
		static $called = false;
		if ($called) return;
		$called = true;


		self::$emailRegex = new \EReg("^[^()<>@,;:\\\\\"\\[\\]\\s[:cntrl:]]+@[A-Z0-9][A-Z0-9-]*(\\.[A-Z0-9][A-Z0-9-]*)*\\.(xn--[A-Z0-9]+|[A-Z]{2,8})\$", "i");
	}
}

Boot::registerClass(EmailValidator::class, 'sugoi.form.validators.EmailValidator');
EmailValidator::__hx__init();
